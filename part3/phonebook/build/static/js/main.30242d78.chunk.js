(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),a=t(17),u=t.n(a),o=t(8),s=t(3),i=t(4),l=t.n(i),j=t(0),b=function(e){var n=e.searchRes,t=e.searchHandler;return Object(j.jsxs)("div",{children:["Filter shown with",Object(j.jsx)("input",{value:n,onChange:t})]})},m=function(e){var n=e.formHandler,t=e.newName,c=e.nameHandler,r=e.newNumber,a=e.numberHandler;return Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsxs)("div",{className:"form-element",children:["name: ",Object(j.jsx)("input",{value:t,onChange:c})]}),Object(j.jsxs)("div",{className:"form-element",children:["number: ",Object(j.jsx)("input",{value:r,onChange:a})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},d=t(18),f=function(e){var n=e.name,t=e.number,c=e.removeContact;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("h3",{children:[n," ",t]}),Object(j.jsx)("button",{onClick:c,children:"Delete"})]})},h=function(e){var n=e.search,t=e.persons,c=e.searchRes,r=e.removeContact;return(n?t.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())})):Object(d.a)(t)).map((function(e){return Object(j.jsx)(f,{removeContact:function(){return r(e.id,e.name)},id:e.id,name:e.name,number:e.number},e.id)}))},O="http://localhost:3001/api/persons",v={getAll:function(){return l.a.get(O)},create:function(e){return l.a.post(O,e)},update:function(e,n){return l.a.put("".concat(O,"/").concat(e),n)},remove:function(e){return l.a.delete("".concat(O,"/").concat(e))}},x=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{className:"msg",children:n})},p=function(e){var n=e.errorMsg;return null===n?null:Object(j.jsx)("div",{className:"error",children:n})},g=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),u=Object(s.a)(a,2),i=u[0],l=u[1],d=Object(c.useState)(""),f=Object(s.a)(d,2),O=f[0],g=f[1],w=Object(c.useState)(!1),C=Object(s.a)(w,2),N=C[0],S=C[1],H=Object(c.useState)(""),k=Object(s.a)(H,2),y=k[0],R=k[1],A=Object(c.useState)(null),D=Object(s.a)(A,2),M=D[0],E=D[1],J=Object(c.useState)(null),L=Object(s.a)(J,2),T=L[0],B=L[1];Object(c.useEffect)((function(){v.getAll().then((function(e){r(e.data)}))}),[]);return Object(j.jsxs)("div",{children:[Object(j.jsx)(b,{searchRes:y,searchHandler:function(e){e.preventDefault();var n=e.target.value;n.trim().length>0?S(!0):S(!1),R(n)}}),Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(p,{errorMsg:T}),Object(j.jsx)(x,{message:M}),Object(j.jsx)(m,{formHandler:function(e){e.preventDefault();var n={name:i,number:O};if(0===t.filter((function(e){return e.name===n.name})).length)v.create(n).then((function(e){r(t.concat(e.data)),l(""),g(""),E("Contact ".concat(n.name," has been added")),setTimeout((function(){E(null)}),5e3)}));else if(window.confirm("".concat(n.name," already exists, do you want to update number?"))){var c=t.find((function(e){return e.name===i}));v.update(c.id,Object(o.a)(Object(o.a)({},c),{},{number:O})).then((function(e){r(t.filter((function(n){return n.name===i?e:n})))})).catch((function(e){B("Contact ".concat(n.name," has been removed")),setTimeout((function(){B(null)}),5e3)}))}},newName:i,nameHandler:function(e){l(e.target.value)},newNumber:O,numberHandler:function(e){g(e.target.value)}}),Object(j.jsx)("h2",{className:"numbers-header",children:"Numbers"}),Object(j.jsx)(h,{search:N,persons:t,searchRes:y,removeContact:function(e,n){window.confirm("Are you sure you want to delete ".concat(n,"?"))&&v.remove(e).then((function(){r(t.filter((function(n){return n.id!==e}))),l(""),g("")}))}})]})};t(42);u.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.30242d78.chunk.js.map